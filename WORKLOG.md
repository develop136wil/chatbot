# 작업 로그 및 다음 단계 기록

## 현재까지 진행된 내용 (2026-01-26)

### 1. 최적화된 하이브리드 LLM 시스템 적용 완료
- **Groq 우선 적용**: `llama-3.1-8b-instant`를 검색어 확장에 사용 (초고속, 일일 14,400회)
- **Groq 백업**: `llama-3.3-70b-versatile`를 Gemini 장애 시 대응 (고성능, 일일 1,000회)
- **결과**: 검색 속도 향상 및 Gemini 할당량 관리 효율 증대

### 2. 정보 포함 전략 분석 및 결정
- **데이터 분석**: 코드베이스, 사용자 패턴, 데이터 구조 심층 분석 완료
- **핵심 발견**:
  - 현재 시스템은 이미 미니멀리즘 채택 (최대 2카드 노출)
  - "비용 부담"과 "주의사항" 데이터는 Notion에 정형화되지 않음
  - 섹션별 사용자 행동 분석 데이터 부재
- **최종 결정**: "미니멀리즘 강화" 방향 확정
  - 핵심 3섹션 (지원 내용, 대상, 문의처)만 제공
  - 상세 정보는 링크로 유도 (현재 방식 유지 및 개선)

### 3. 기술적 개선 사항
- **Groq 모델 교체**: `llama-3.1-8b-instant`와 `llama-3.3-70b-versatile` 적용 완료
- **메모리 관리**: Gemini 키 로테이션 Round-Robin 방식 안정화
- **백업 시스템**: Gemini 할당량 초과 시 자동 Groq 전환 로직 구현

---

## 다음 개발 단계 제안

### 즉시 실행 가능한 과제들
1. **요약 프롬프트 단순화**
   - `summarize_content_with_llm`의 추출 항목을 3개로 축소
   - "비용 부담", "신청 방법", "주의사항"은 링크로 확인 안내

2. **포맷팅 필터 개선**
   - `clean_summary_text`의 `target_keywords`를 3개 항목으로 정리
   - 불필요한 헤더는 자동 제거

3. **Notion 데이터 구조 개선 (중장기)**
   - 비용, 주의사항 필드 분리 추가
   - `index.py`의 필드 매핑 확장

4. **사용자 분석 시스템 도입 (중장기)**
   - 섹션별 클릭/읽기 시간 트래킹
   - A/B 테스트 기능 도입
   - GA4 또는 유사 분석 툴 연동

### 기술 부채 목록
- **데이터 품질**: Notion에 비용/주의사항 필드 없음
- **분석 부족**: 사용자 행동 패턴 정량 데이터 부족
- **테스트**: 자동화된 테스트 스위트 없음

---
## 참고: 현재 시스템 아키텍처

```
[FastAPI(main.py)] → [Redis Queue] → [Worker(worker.py)]
                                      ↓
                                   [Gemini 2.5 Flash] (주력)
                                   [Groq Llama-3.1-8b] (검색 확장)
                                   [Groq Llama-3.3-70b] (백업)
                                      ↓
                                   [Supabase] (벡터 검색 + 캐시)
```

## 향후 개발 우선순위

1. **High**: 요약 프롬프트 단순화 (오늘 당장 가능)
2. **Medium**: Notion 데이터 구조 개선 (데이터 마이그레이션 필요)
3. **Medium**: 사용자 행동 분석 도입 (분석툴 선정 필요)
4. **Low**: A/B 테스트 프레임워크 (추가 기능)

---
*기록일: 2026-01-26*
*담당자: Sisyphus Assistant*
*다음 액션: 개발 재개 시 위 우선순위 참고*